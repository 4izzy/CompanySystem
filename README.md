# CompanySy

CompanySy — это мой учебный проект для управления отделами, сотрудниками, проектами и HR-процессами в компании. Я сделал его на Java с использованием Spring Boot и микросервисной архитектуры. Здесь несколько сервисов, которые общаются друг с другом через REST и Feign.

## Структура проекта
- **department-service** — сервис для работы с отделами (создание, просмотр, редактирование, удаление отделов).
- **employee-service** — сервис для работы с сотрудниками (CRUD сотрудников, поиск по отделу и email).
- **project-service** — сервис для управления проектами и их участниками.
- **hr-service** — сервис для HR-акций (например, кадровые изменения, уведомления сотрудников).
- **notification-service** — сервис для отправки уведомлений (email, в будущем — SMS и системные).
- **Prometheus и Grafana** — мониторинг и визуализация метрик.

## Технологии
- Java 17+
- Spring Boot, Spring Cloud OpenFeign
- Spring Data JPA, Hibernate
- PostgreSQL
- Maven
- Docker Compose
- Prometheus, Grafana

## Как запустить проект
1. Клонируйте репозиторий:
   ```bash
   git clone <ссылка-на-репозиторий>
   cd CompanySy
   ```
2. Запустите инфраструктуру через Docker Compose:
   ```bash
   docker-compose up --build
   ```
   Это поднимет все сервисы, базы данных и мониторинг. Для автоматизации можно использовать скрипт:
   ```bash
   cd scripts
   ./build.sh
   ```
   > **Важно:** Для отправки email-уведомлений укажите переменные окружения `MAIL_USERNAME` и `MAIL_PASSWORD` (например, для Gmail).

3. (Опционально) Запустите сервисы вручную для отладки:
   - Перейдите в нужный модуль и выполните:
     ```bash
     ./mvnw clean package
     java -jar target/<имя-jar-файла>.jar
     ```
   - Или запустите класс `CompanySyApplication` или `CompanyApplication` через IDE.

## Примеры запросов
- Получить всех сотрудников: `GET http://localhost:8082/api/employees`
- Получить все отделы: `GET http://localhost:8081/api/departments`
- Получить все проекты: `GET http://localhost:8083/api/projects`
- Получить все HR-акции: `GET http://localhost:8084/api/hr/actions`

## Как это работает
- Сервисы общаются друг с другом через REST и Feign-клиенты.
- Каждый сервис использует свою базу данных PostgreSQL.
- HR-сервис получает email сотрудника из employee-сервиса и отправляет уведомление через notification-сервис.
- Notification-service реализует отправку email (SMS и системные уведомления пока не реализованы).
- Мониторинг сервисов доступен через Prometheus и Grafana (порт 3000).

## Тестирование
- В каждом сервисе есть тесты на JUnit 5.
- Для интеграционного тестирования можно использовать Testcontainers (при необходимости).

## Примечания
- Все настройки сервисов лежат в файлах `application.properties`.
- Пароли и логины для баз данных указаны в `docker-compose.yml` (для учебных целей).
- Если что-то не работает — проверьте логи сервисов, обычно там всё понятно.

## Контакты
Если есть вопросы по проекту — пишите мне, я с радостью помогу!

Спасибо, что посмотрели мой проект! 